import { createClient } from '@supabase/supabase-js';
import * as dotenv from 'dotenv';
import * as path from 'path';

// .env.localã‚’èª­ã¿è¾¼ã‚€
dotenv.config({ path: path.join(process.cwd(), '.env.local') });

const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;
const supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;

const supabase = createClient(supabaseUrl, supabaseKey);

// çŸ¥è­˜ã‚¨ãƒ³ãƒˆãƒªã®ãƒ‡ãƒ¼ã‚¿
const knowledgeEntries = [
  {
    title: 'é™°é™½äº”è¡Œæ€æƒ³ã¨ã¯',
    content: `é™°é™½äº”è¡Œèª¬ã¯ã€ä¹æ˜Ÿæ°—å­¦ã®æ ¹å¹¹ã‚’ãªã™æ•°åƒå¹´ã®æ­´å²ã‚’æŒã¤æ±æ´‹ã®è‡ªç„¶å“²å­¦ã§ã™ã€‚

ã€é™°é™½èª¬ã€‘
å®‡å®™ã®ã‚ã‚‰ã‚†ã‚‹äº‹è±¡ã¯ã€ã€Œé™°ã€ã¨ã€Œé™½ã€ã¨ã„ã†äºŒã¤ã®ç›¸åã—ãªãŒã‚‰ã‚‚è£œã„åˆã†ã‚¨ãƒãƒ«ã‚®ãƒ¼ã«ã‚ˆã£ã¦æˆã‚Šç«‹ã£ã¦ã„ã¾ã™ã€‚æ˜¼ã¨å¤œã€ç”·æ€§ã¨å¥³æ€§ã€å…‰ã¨é—‡ãªã©ã€å¯¾ç«‹ã™ã‚‹è¦ç´ ãŒäº’ã„ã«å½±éŸ¿ã—åˆã„ã€ãƒãƒ©ãƒ³ã‚¹ã‚’ä¿ã¡ãªãŒã‚‰ä¸‡ç‰©ã‚’ç”Ÿæˆãƒ»å¤‰åŒ–ã•ã›ã¦ã„ã¾ã™ã€‚

ã€äº”è¡Œèª¬ã€‘
è‡ªç„¶ç•Œã®ã™ã¹ã¦ã®ã‚‚ã®ã¯ã€Œæœ¨ï¼ˆã‚‚ãï¼‰ã€ã€Œç«ï¼ˆã‹ï¼‰ã€ã€ŒåœŸï¼ˆã©ï¼‰ã€ã€Œé‡‘ï¼ˆã”ã‚“ï¼‰ã€ã€Œæ°´ï¼ˆã™ã„ï¼‰ã€ã¨ã„ã†äº”ã¤ã®è¦ç´ ã«åˆ†é¡žã§ãã¾ã™ã€‚

äº”è¡Œã®ç›¸äº’é–¢ä¿‚:
ãƒ»ç›¸ç”Ÿï¼ˆãã†ã—ã‚‡ã†ï¼‰ï¼šäº’ã„ã«ç”Ÿã¿å‡ºã—åˆã†é–¢ä¿‚
  æœ¨â†’ç«â†’åœŸâ†’é‡‘â†’æ°´â†’æœ¨...
ãƒ»ç›¸å‰‹ï¼ˆãã†ã“ãï¼‰ï¼šäº’ã„ã«æŠ‘åˆ¶ã—åˆã†é–¢ä¿‚
  æ°´ã¯ç«ã‚’æ¶ˆã—ã€ç«ã¯é‡‘ã‚’æº¶ã‹ã—ã€é‡‘ã¯æœ¨ã‚’åˆ‡ã‚Šã€æœ¨ã¯åœŸã®é¤Šåˆ†ã‚’å¥ªã„ã€åœŸã¯æ°´ã‚’ã›ãæ­¢ã‚ã‚‹

ä¹æ˜Ÿæ°—å­¦ã§ã¯ã€ä¹ã¤ã®æ˜Ÿãã‚Œãžã‚Œã«äº”è¡ŒãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¦ãŠã‚Šã€ã“ã®é™°é™½äº”è¡Œã®æ³•å‰‡ãŒã€ãã®äººã®æœ¬è³ªã‚„é‹æ°—ã®æµã‚Œã€å‰æ–¹ä½ã‚„å‡¶æ–¹ä½ã‚’å°Žãå‡ºã™ãŸã‚ã®åŸºæœ¬çš„ãªæž çµ„ã¿ã¨ãªã£ã¦ã„ã¾ã™ã€‚`,
    summary: 'é™°é™½äº”è¡Œèª¬ã¯ä¹æ˜Ÿæ°—å­¦ã®æ ¹æœ¬åŽŸç†ã§ã‚ã‚Šã€å®‡å®™ã®ä¸‡ç‰©ã¯é™°é™½ã¨äº”è¡Œï¼ˆæœ¨ç«åœŸé‡‘æ°´ï¼‰ã®ç›¸äº’ä½œç”¨ã«ã‚ˆã£ã¦æˆã‚Šç«‹ã¤ã¨ã„ã†æ€æƒ³',
    essence: 'é™°é™½äº”è¡Œèª¬ã¯ã€å®‡å®™ã®ä¸‡ç‰©ã¯ã€Œé™°ã€ã¨ã€Œé™½ã€ã¨ã„ã†ç›¸åã™ã‚‹äºŒã¤ã®æ€§è³ªã‚’æŒã¤ã€Œæ°—ã€ã«ã‚ˆã£ã¦æ§‹æˆã•ã‚Œã€ã•ã‚‰ã«ã€Œæœ¨ãƒ»ç«ãƒ»åœŸãƒ»é‡‘ãƒ»æ°´ã€ã¨ã„ã†äº”ã¤ã®è¦ç´ ã«åˆ†é¡žã§ãã‚‹ã¨ã„ã†è€ƒãˆæ–¹ã€‚ã“ã‚Œã‚‰ãŒäº’ã„ã«ç”Ÿã¿å‡ºã—åˆã†ã€Œç›¸ç”Ÿã€ã¨ã€äº’ã„ã«æŠ‘åˆ¶ã—åˆã†ã€Œç›¸å‰‹ã€ã®é–¢ä¿‚ã‚’æŒã¤ã“ã¨ã§ã€ä¸‡ç‰©ã®èª¿å’Œã¨ãƒãƒ©ãƒ³ã‚¹ãŒä¿ãŸã‚Œã¦ã„ã‚‹ã€‚',
    historical_context: 'ç´€å…ƒå‰ã®ä¸­å›½ã§ç”Ÿã¾ã‚ŒãŸè‡ªç„¶å“²å­¦ã§ã‚ã‚Šã€æ˜“çµŒã‚„å¥‡é–€éç”²ãªã©ã®å¤ä»£å è¡“ã¨åŒã˜æ™‚æœŸã«å½¢æˆã•ã‚ŒãŸã€‚',
    traditional_wisdom: 'é™°é™½äº”è¡Œã®æ³•å‰‡ã¯ã€å€‹äººã®æœ¬è³ªã€é‹æ°—ã®æµã‚Œã€å‰æ–¹ä½ãƒ»å‡¶æ–¹ä½ã‚’åˆ¤æ–­ã™ã‚‹åŸºæœ¬çš„ãªæž çµ„ã¿ã¨ã—ã¦ã€æ•°åƒå¹´ã«ã‚ãŸã‚Šä¼æ‰¿ã•ã‚Œã¦ããŸã€‚',
    related_stars: [1, 2, 3, 4, 5, 6, 7, 8, 9],
    keywords: ['é™°é™½äº”è¡Œ', 'ç›¸ç”Ÿ', 'ç›¸å‰‹', 'æœ¬è³ª', 'å®‡å®™åŽŸç†', 'ä¼çµ±'],
    importance_level: 5,
    is_verified: true,
    is_published: true,
  },
  // ... ä»–ã®ã‚¨ãƒ³ãƒˆãƒªã‚‚åŒæ§˜ã«è¿½åŠ 
];

async function insertKnowledgeEntries() {
  console.log('ðŸš€ çŸ¥è­˜ã‚¨ãƒ³ãƒˆãƒªã‚’æŠ•å…¥ä¸­...\n');
  
  let successCount = 0;
  let errorCount = 0;
  
  for (const entry of knowledgeEntries) {
    const { error } = await supabase
      .from('knowledge_entries')
      .insert(entry);
    
    if (error) {
      console.error(`âŒ ã‚¨ãƒ©ãƒ¼ (${entry.title}):`, error.message);
      errorCount++;
    } else {
      console.log(`âœ… æŠ•å…¥æˆåŠŸ: ${entry.title}`);
      successCount++;
    }
  }
  
  console.log(`\nðŸ“Š çµæžœ: æˆåŠŸ ${successCount}ä»¶ / ã‚¨ãƒ©ãƒ¼ ${errorCount}ä»¶\n`);
  
  // ç¢ºèª
  const { data, error } = await supabase
    .from('knowledge_entries')
    .select('title, created_at')
    .order('created_at', { ascending: false })
    .limit(15);
  
  if (!error && data) {
    console.log('ðŸ“‹ æœ€æ–°ã®ã‚¨ãƒ³ãƒˆãƒª:');
    data.forEach((entry, i) => {
      console.log(`  ${i + 1}. ${entry.title}`);
    });
  }
}

insertKnowledgeEntries().catch(console.error);
